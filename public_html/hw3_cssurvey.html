<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/JavaScript">   
            function calcAverageMax() {
                var error_block = document.getElementById("avg_max_error");
                var average_block = document.getElementById("average_value");
                var maximum_block = document.getElementById("maximum_value");
                
                var dataset = document.getElementById("avg_max_set");
                if( dataset != null ){
                    var raw = dataset.value;
                    alert("Got: "+raw);
                    // test regex ^(100|[1-9]|[1-9][0-9])+(,(100|[1-9]|[1-9][0-9])+){9,}$
                    var patt = new RegExp("^(100|[1-9]|[1-9][0-9])+(,(100|[1-9]|[1-9][0-9])+){9,}$");
                    var res = patt.test(raw);
                    if(!res){
                        // alert("Data set must match at least 10 comman separated values ranging 1 through 100.")
                        if(error_block != null){
                            error_block.innerHTML = "Data set must match at least 10 comma separated values ranging 1 through 100.";
                        }
                        if( average_block != null ) {
                            average_block.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp";
                        }
                        if( maximum_block != null ){
                            maximum_block.innerHTML = "&nbsp;&nbsp:&nbsp;&nbsp";
                        }
                    } else {
                        var total = 0;
                        var max = 0;
                        var values = raw.split(",");
                        for (idx=0; idx<values.length; idx++) {
                            var tmp = parseInt(values[idx]);
                            total += tmp;
                            if(tmp > max) {
                                max = tmp;
                            }
                        }
                        average_value = total/values.length;
                        
                        if(error_block != null){
                            error_block.innerHTML = "&nbsp;";
                        }
                        if( average_block != null ) {
                            average_block.innerHTML = ""+average_value;
                        }
                        if( maximum_block != null ){
                            maximum_block.innerHTML = ""+max;
                        }
                    }
                }
            }
            
            function greetUser() {
                var now = new Date(); // current date
                var hour = now.getHours(); // current hour 0 - 23
                var name;
                
                if( document.cookie){
                    var myCookie = unescape(document.cookie);
                    var cookieTokens = myCookie.split("=");
                    name = cookieTokens[1];
                } else {
                    getName(false);
                    
                    //name = window.prompt( "Please enter your name.");
                    //expDate = new Date();
                    //expDate.setDate(expDate.getDate() + 14); 
                    //expires = expDate.toGMTString();
                    //document.cookie = "name="+escape(name)+"; expires="+expires;
                }
                var whdr = document.getElementById("welcome_header");
                var hdrText = "";
                if (whdr != null) {
                    if ( hour < 12 ) {
                        // determine whether it is morning
                        hdrText = hdrText + "Good Morning, "+name;
                    } else {
                        hour = hour - 12; // convert from 24-hour clock to PM time
                        // determine whether it is afternoon or evening
                        if ( hour < 6 ){
                            hdrText = hdrText + "Good Afternoon, "+name;
                        }else{
                           hdrText = hdrText + "Good Evening, "+name;
                        }
                    } // end else
                    hdrText = hdrText + ".&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>Not "+name+"? Please <a class=\"float_button\" onclick=\"getDifferentName()\">click here</a></i>.";
                    whdr.innerHTML = hdrText;
                }
            }
            
            function getName(pageRefresh) {
                pageRefresh = !!pageRefresh;
                var name = window.prompt( "Please enter your name.");
                if( name != null &&  name.trim() != "null" && name.trim() != "") {
                    expDate = new Date();
                    expDate.setDate(expDate.getDate() + 14); 
                    expires = expDate.toGMTString();
                    document.cookie = "name="+escape(name)+"; expires="+expires;
                    if( pageRefresh ){
                        window.location.reload(true);
                    }
                } else {
                    if( !pageRefresh ) {
                        // User clicked "Not Me" and hit cancel or no name enterred.
                        alert("Please enter a valid name.");
                    }
                }
            }
            
            function getDifferentName() {
              getName(true);    
            }
            
            function pageSetup(){
                greetUser();
            }
            
            function validateSurveyForm() {
                var retval = true;
                var surveyForm = document.forms["surveyForm"];
                var nameFirstLast = document.getElementById("txt_namefirstlast").value;
                var address = document.getElementById("txt_streetaddress").value;
                var emailAddress = document.getElementById("txt_email").value;
                var radInterest = document.forms["surveyForm"]["interestind"];
                var errorStr = "";
                
                if( nameFirstLast != null && nameFirstLast != "null" && nameFirstLast.trim() != "" ){
                    val = nameFirstLast.trim();
                    // var re = new RegExp("^[a-zA-Z\s]*$");
                    // var res = re.test(val);
                    valid = /[^a-zA-Z\s]/.test(val)
                    if (valid){
                        errorStr = errorStr + "Name must be only letters and spaces.\n";
                    }
                } else {
                    errorStr = errorStr + "You must supply a valid username\n";
                }
                
                if( radInterest != null ){
                    checked = false;
                    for(i=0; (i<radInterest.length && !checked); i++){
                        if( radInterest[i].checked){
                            checked = true;
                        }
                    }
                    if(!checked){
                        errorStr = errorStr + "You must select a University interest item.\n";
                    }
                }
                
                if( errorStr != null && errorStr != "" ){
                    retval = false;
                    alert(errorStr);
                }
                return retval;
            }
        </script>
        <title>George Mason University Department of Computer Science Prospective Student Survey</title>
         <link rel="stylesheet" type="text/css" href="lrhw2_styles.css"/>
    </head>
    <body class="welcome" onload="pageSetup()">
<div class="topnav">
  <a class="active" href="./hw2_csinfo.html">CS Department Information</a>
  <a href="./index.html">Larry Rodrigues Class Web Page</a>
  <a href="#contact">Contact Larry Rodrigues</a>
  <a href="#survey">Survey</a>
</div>
        <h1 class="top_header">George Mason University Department of Computer Science Prospective Student Survey</h1>
        <h3 class="welcome" id="welcome_header">Welcome</h3>
        <h2>Please help us better understand our prospect Computer Science students by completing this survey</h2>
        <form action="" name ="surveyForm" method="post" autocomplete="on" onsubmit="return validateSurveyForm()">

        <table align=center" width="100%">
            <tr>
                <td align="right">Username:</td><td align="left"><input type="text" name="username"  id="txt_username"  size="20"  autocomplete="on" maxlength="20" autofocus="autofocus" required /></td>
                <td align="right">Email Address:</td><td align="left"><input required type="email" name="email" id="txt_email" size="30"  autocomplete="on" maxlength="50" placeholder="name@domain-name.com" />&nbsp;[name@domain-name.com]</td>
            </tr>
            <tr>
                <td align="right">Name (First Last):</td><td align="left"><input required type="text" name="namefirstlast" id="txt_namefirstlast" size="30"  autocomplete="on" maxlength="50"/></td>
                <td align="right">Phone Number:</td><td align="left"><input type="tel" name="phonenumber" id="txt_phonenumber" pattern="\(\d{3}\)+\d{3}-\d{4}" placeholder="(###) ###-####"/>&nbsp;[(123)456-7890]</td>
            </tr>
            <tr>
                <td align="right" colspan="1">Street Address:</td><td align="left" colspan="3"><input type="text" name="streetaddress" id="txt_streetaddress" size="100"  autocomplete="on" maxlength="100"/></td>
            </tr>
            <tr>
                <td align="right">City:</td><td align="left"><input type="text" name="city" id="txt_city" size="30"  autocomplete="on" maxlength="50"/></td>
                <td align="right">State:</td><td align="left"><select name="state" id="sel_state">
        <option value="--">----------</option>                
	<option value="AL">Alabama</option>
	<option value="AK">Alaska</option>
	<option value="AZ">Arizona</option>
	<option value="AR">Arkansas</option>
	<option value="CA">California</option>
	<option value="CO">Colorado</option>
	<option value="CT">Connecticut</option>
	<option value="DE">Delaware</option>
	<option value="DC">District Of Columbia</option>
	<option value="FL">Florida</option>
	<option value="GA">Georgia</option>
	<option value="HI">Hawaii</option>
	<option value="ID">Idaho</option>
	<option value="IL">Illinois</option>
	<option value="IN">Indiana</option>
	<option value="IA">Iowa</option>
	<option value="KS">Kansas</option>
	<option value="KY">Kentucky</option>
	<option value="LA">Louisiana</option>
	<option value="ME">Maine</option>
	<option value="MD">Maryland</option>
	<option value="MA">Massachusetts</option>
	<option value="MI">Michigan</option>
	<option value="MN">Minnesota</option>
	<option value="MS">Mississippi</option>
	<option value="MO">Missouri</option>
	<option value="MT">Montana</option>
	<option value="NE">Nebraska</option>
	<option value="NV">Nevada</option>
	<option value="NH">New Hampshire</option>
	<option value="NJ">New Jersey</option>
	<option value="NM">New Mexico</option>
	<option value="NY">New York</option>
	<option value="NC">North Carolina</option>
	<option value="ND">North Dakota</option>
	<option value="OH">Ohio</option>
	<option value="OK">Oklahoma</option>
	<option value="OR">Oregon</option>
	<option value="PA">Pennsylvania</option>
	<option value="RI">Rhode Island</option>
	<option value="SC">South Carolina</option>
	<option value="SD">South Dakota</option>
	<option value="TN">Tennessee</option>
	<option value="TX">Texas</option>
	<option value="UT">Utah</option>
	<option value="VT">Vermont</option>
	<option value="VA">Virginia</option>
	<option value="WA">Washington</option>
	<option value="WV">West Virginia</option>
	<option value="WI">Wisconsin</option>
	<option value="WY">Wyoming</option>
</select>
                </td>
            </tr>
            <tr>
                <td align="right">Home Page URL:</td><td align="left" colspan="3"><input type="url" id="txt_homepageurl" name="homepageurl"  placeholder="http://domain-name.com" size="30"  autocomplete="on" maxlength="50"/>&nbsp;[http://domain-name.com]</td>
            </tr>
            <tr>
                <td align="right">Date Of Survey:</td><td align="left" colspan="3"><input type="date" id="txt_surveydate" name="surveydate" pattern="yyyy-mm-dd" placeholder="yyyy-mm-dd"/>&nbsp;[yyyy-mm-dd]</td>
            </tr>
            <tr>
                <td align="right">What is your high school graduation month and year?</td>
                <td align="left" colspan="3">
                    <input type="text" name="hsgradmonth" id="txt_hsgradmonth" placeholder="Select a Month" list="months"/>
                    <datalist id="months">
                        <option value="January"></option>
                        <option value="February"></option>
                        <option value="March"></option>
                        <option value="April"></option>
                        <option value="May"></option>
                        <option value="June"></option>
                        <option value="July"></option>
                        <option value="August"></option>
                        <option value="September"></option>
                        <option value="October"></option>
                        <option value="November"></option>
                        <option value="December"></option>                        
                    </datalist>
                    &nbsp;
                    <input type="text" name="gradyear" id="txt_gradyear" size="10" maxlength="4" minlength="4" placeholder="Year YYYY" pattern="[1,2][0-9][0-9][0-9]" />&nbsp;[YYYY]
                </td>
            </tr>
        </table>
        <br />
        <table class="survey_option_table" align="center" width="100%">
            <tr class="survey_option_row">
                <td align="right" colspan="1" class="survey_option" style="width:50%">What did you like best about the campus?</td>
                <td align="left" colspan="1" class="survey_option"  style="width:50%">
                      <input type="checkbox" name="campuslike" id="students" value="students" />Students <br />
                      <input type="checkbox" name="campuslike" id="location" value="location" />Location<br />
                      <input type="checkbox" name="campuslike" id="campus" value="campus" />Campus<br />
                      <input type="checkbox" name="campuslike" id="atmosphere" value="atmosphere" />Atmosphere<br />
                      <input type="checkbox" name="campuslike" id="dormrooms" value="dormrooms" />Dorm Rooms<br />
                      <input type="checkbox" name="campuslike" id="sports" value="sports" />Sports<br />
                </td>
            </tr>
            <tr>
                <td align="right" colspan="1" class="survey_option" style="width:50%">How did you become interested in the University?</td>
                <td align="left" colspan="1" class="survey_option"  style="width:50%">
                      <input type="radio" name="interestind" id="friends" value="friends" />Friends<br />
                      <input type="radio" name="interestind" id="television" value="television" />Television<br />
                      <input type="radio" name="interestind" id="internet" value="internet" />Internet<br />
                      <input type="radio" name="interestind" id="other" value="other" />Other<br />
                </td>
            </tr>
            <tr>
                <td align="right" colspan="1" class="survey_option" style="width:50%">How likely are you to recommend this school to other prospective students?</td>
                <td align="left" colspan="1" class="survey_option"  style="width:50%">
                    <select name="likelyrecommend" id="sel_likelyrecommend">
                        <option value="verylikely">Very Likely</option>
                        <option value="likely">Likely</option>
                        <option value="unlikely">Unlikely</option>
                    </select>
                </td>
        </table>
        <table class="movie_rating_table" align="center" width="100%">
            <tr class="movie_rating_row"><td align="left">Please rate a movie.</td></tr>
                        <tr class="movie_rating_row"><td><input type="hidden" name="userid" id="hid_userid" value="1"/>
        &nbsp;Movie Title:&nbsp;<select name="movieid" id="sel_movieid">
        <option value="-1">----------</option>
	<option value="1">Sweet Home Alabama</option>
	<option value="2">Godzilla</option>
	<option value="3">Raising Arizona</option>
	<option value="4">The Godfather</option>
	<option value="5">Pulp Fiction</option>
	<option value="6">Alien</option>
	<option value="7">Harry Potter and the Sorcerers Stone</option>
	<option value="8">Lion In Winter</option>
	<option value="9">Red</option>
        <option value="10">Life Of Pie</option>
        </select>&nbsp;Movie Rating:&nbsp;
        <select name="movierating" id="sel_movierating">
        <option value="-1">----------</option>
	<option value="1">1 -- terrible</option>
	<option value="2">2</option>
	<option value="3">3</option>
	<option value="4">4</option>
	<option value="5">5</option>
	<option value="6">6</option>
	<option value="7">7</option>
	<option value="8">8</option>
	<option value="9">9</option>
        <option value="10">10 -- perfect</option>
                    </select>&nbsp;[1 (terrible)... 10 (perfect)]&nbsp;
                    <input type="hidden" name="ratingtstamp" id="hid_ratingtimestamp"/>
                            </td></tr>
        </table>
    
        <table class="average_and_max_table" align="center" width="100%">
            <tr class="average_row"><td align="left">Please enter 10 or more comma separated numbers. &nbsp;<input id="avg_max_set" name="avg_max_data" type="text" size="40" onblur="calcAverageMax();" placeholder="1,2,3.....N" pattern="^(100|[1-9]|[1-9][0-9])+(,(100|[1-9]|[1-9][0-9])+){9,}$" />&nbsp;<span class="error_text" id="avg_max_error"></span></td></tr>
            <tr class="average_row"><td align="left">&nbsp;Average:<span class="output_display" id="average_value">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;Maximum:<span class="output_display" id="maximum_value">&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>
        </table>
        <table class="comments_table">
            <tr><td align="left">Please enter any additional comments.</td></tr>
            <tr><td align="left"><textarea rows="10" cols="70" name="comments">Enter your comments here...</textarea></td></tr>
        </table>
        <table align="center" width="100%">
            <tr><td align="center"><input type="submit" value="Submit now" />&nbsp;<input type="reset" value="Reset Form Fields"></td></tr>
        </table>
        </form>
        <div class="fixed_bottom_right"><a href="https://www2.gmu.edu/" name="mason-logo"><img src="mason-logo-green.png"/></a></div>
    </body>
</html>
